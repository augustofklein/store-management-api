CREATE TABLE companies (
    id SERIAL PRIMARY KEY,
    name VARCHAR(50) NOT NULL,

    CONSTRAINT uq_companies_name UNIQUE (name)
);

CREATE TABLE users (
    company_id INTEGER NOT NULL,
    id SERIAL PRIMARY KEY,
    email VARCHAR(50) NOT NULL,
    password_hash VARCHAR(200) NOT NULL,

    CONSTRAINT fk_users_company
        FOREIGN KEY (company_id)
        REFERENCES companies(id)
        ON DELETE CASCADE
);

CREATE TABLE products (
    company_id INTEGER NOT NULL,
    id SERIAL PRIMARY KEY,
    sku_id VARCHAR(20) NOT NULL,
    status BOOLEAN NOT NULL,
    barcode VARCHAR(13) NOT NULL,
    description VARCHAR(50) NOT NULL,
    stock INTEGER NOT NULL,

    CONSTRAINT fk_products_company
        FOREIGN KEY (company_id)
        REFERENCES companies(id)
        ON DELETE CASCADE
);

CREATE TABLE customers (
    company_id INTEGER NOT NULL,
    id SERIAL PRIMARY KEY,
    identification VARCHAR(18) NOT NULL,
    address VARCHAR(100) NOT NULL,

    CONSTRAINT fk_customers_company
        FOREIGN KEY (company_id)
        REFERENCES companies(id)
        ON DELETE CASCADE
);

CREATE TABLE contact_type (
    id SERIAL PRIMARY KEY,
    description VARCHAR(50) NOT NULL
);

CREATE TABLE customer_contact (
    company_id INTEGER NOT NULL,
    customer_id INTEGER NOT NULL,
    id SERIAL PRIMARY KEY,
    contact VARCHAR(50) NOT NULL,

    CONSTRAINT fk_customer_contact_company
        FOREIGN KEY (company_id)
        REFERENCES companies(id)
        ON DELETE CASCADE,

    CONSTRAINT fk_customer_contact_type
        FOREIGN KEY (customer_id)
        REFERENCES customers(id)
        ON DELETE CASCADE
);